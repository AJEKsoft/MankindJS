<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,
				   user-scalable=no,
				   maximum-scale=1.0,
				   minimum-scale=1.0">
    <title>MankindJS</title>
    
    <link rel="stylesheet" href="res/index.css">

    <!-- Shaders. -->
    <script type="x-shader/x-vertex" id="default.vs">
      #version 300 es

      in ivec3 position;
      in float color;

      out vec4 vertexColor;

      uniform mat4 model, view, projection;
      uniform vec3 eye;

      const float pointsize = 75.0;
      
      void main ()
      {
	  ivec3 pos = position;
	  // hardcoded... make the 16 be an uniform or sum bull
	  pos.z += gl_InstanceID % 16;
	  pos.y += (gl_InstanceID / 16) % 16;
	  pos.x += gl_InstanceID / (16 * 16);
	  
	  gl_Position = projection * view * model * vec4(pos, 1.0);
	  gl_PointSize = pointsize;

	  vertexColor = vec4 (color, color, color, 1.0);
      }
    </script>
    
    <script type="x-shader/x-fragment" id="default.fs">
      #version 300 es

      precision mediump float;

      in vec4 vertexColor;
      
      out vec4 color;

      void main ()
      {
	  vec2 circCoord = 2.0 * gl_PointCoord - 1.0;

	  if (dot (circCoord, circCoord) > 1.0)
	  {
	      discard;
	  }
	  
	  color = vertexColor;
      }
    </script>
    
    <!-- Code. -->
    <script type="text/javascript" src="src/utilities.js"></script>
    <script type="text/javascript" src="src/chunk.js"></script>
    <script type="text/javascript" src="src/camera.js"></script>
    <script type="text/javascript" src="src/mesh.js"></script>
    <script type="text/javascript" src="src/program.js"></script>
    <script type="text/javascript" src="src/index.js"></script>
  </head>

  <body>
    <canvas id="canvas"></canvas>
  </body>
</html>
